webpackJsonp([2],{"9kle":function(t,e){},V1Az:function(t,e){},ZPUu:function(t,e){},ePa7:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("lC5x"),n=s.n(i),o=s("J0Oq"),a=s.n(o),r={data:function(){return{cur:1,pageSize:10,total:0,lessons:[]}},props:["CommonObj"],methods:{getLesson:function(){var t=this;return a()(n.a.mark(function e(){var s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/api/lesson/list",{params:{page:t.cur,pageSize:t.pageSize}});case 2:s=e.sent,t.lessons=s.list,t.total=s.total;case 5:case"end":return e.stop()}},e,t)}))()},handleSizeChange:function(t){this.pageSize=t,this.getLesson()},toDetail:function(t){this.CommonObj.lessonId=t.id,this.CommonObj.lessonName=t.name,this.CommonObj.changePage(1)}},mounted:function(){var t=this;this.$nextTick(function(){t.getLesson()})},activated:function(){var t=this;this.$nextTick(function(){t.getLesson()})}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"lesson"},[s("h1",[t._v("选择课程")]),t._v(" "),s("hr"),t._v(" "),s("div",{staticStyle:{width:"100%",overflow:"hidden"}},[s("el-table",{attrs:{data:t.lessons}},[s("el-table-column",{attrs:{prop:"id",label:"ID",width:"60"}}),t._v(" "),s("el-table-column",{attrs:{prop:"name",label:"名字",width:"200"}}),t._v(" "),s("el-table-column",{attrs:{prop:"teach_time",label:"上课时间",width:"350"}}),t._v(" "),s("el-table-column",{attrs:{prop:"area",label:"上课地点",width:"150"}}),t._v(" "),s("el-table-column",{attrs:{prop:"lesson_code",label:"选课课号"}}),t._v(" "),s("el-table-column",{attrs:{label:"题库列表",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(s){t.toDetail(e.row)}}},[t._v("查看")])]}}])})],1)],1),t._v(" "),s("el-pagination",{attrs:{"current-page":t.cur,"page-sizes":[10,50,100],background:"","page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"current-change":t.getLesson,"size-change":t.handleSizeChange,"update:currentPage":function(e){t.cur=e}}})],1)},staticRenderFns:[]};var u=s("Z0/y")(r,l,!1,function(t){s("9kle")},null,null).exports,c=s("0xDb"),m=s.n(c),d={data:function(){return{cur:1,pageSize:10,total:0,questions:[],title:"",dialogVisible:!1,title2:"",dialogVisible2:!1,questForm:{id:"",title:"",question:"",answer:""},rules:{title:[{required:!0,message:"请输入题目标题",trigger:"blur"}]},isAdd:!0,activeNames:[]}},props:["CommonObj"],methods:{getQuestion:function(){var t=this;return a()(n.a.mark(function e(){var s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/api/quest/list",{params:{id:t.CommonObj.lessonId,page:t.cur,pageSize:t.pageSize}});case 2:s=e.sent,t.questions=s.list,t.total=s.total;case 5:case"end":return e.stop()}},e,t)}))()},handleSizeChange:function(t){this.pageSize=t,this.getQuestion()},handleEdit:function(t){var e=this;this.$http.get("api/quest/detail",{params:{id:t.id}}).then(function(s){e.questForm.question=s.question,e.questForm.id=t.id,e.questForm.title=t.title,e.questForm.answer=s.answer}),this.title="修改题目信息",this.dialogVisible=!0,this.isAdd=!1},quest:function(t){var e=this;this.$http.get("api/quest/detail",{params:{id:t.id}}).then(function(s){e.questForm.question=s.question,e.questForm.id=t.id,e.questForm.title=t.title,e.questForm.answer=s.answer}),this.title2=t.title.length>32?t.title.substring(0,31)+"...":t.title,this.dialogVisible2=!0},dateFormat:function(t,e,s){return m.a.DateTransfer(new Date(s),"yyyy-MM-dd hh:mm:ss")},showAdd:function(){this.title="添加题目",this.dialogVisible=!0,this.isAdd=!0,this.questForm.id="",this.questForm.title="",this.questForm.question="",this.questForm.answer=""},submitForm:function(){var t=this;this.$refs.questForm.validate(function(e){if(!e)return console.log("error submit!!"),!1;t.sendQuest()})},sendQuest:function(){var t=this;this.isAdd?this.$http.post("api/quest/add",{question:this.questForm.question,answer:this.questForm.answer,lesson_id:this.CommonObj.lessonId,title:this.questForm.title}).then(function(e){t.$message({type:"success",message:"添加成功"}),t.getQuestion(),t.dialogVisible=!1}):this.$http.post("api/quest/update",{id:this.questForm.id,question:this.questForm.question,answer:this.questForm.answer,title:this.questForm.title}).then(function(e){t.$message({type:"success",message:"更新成功"}),t.getQuestion(),t.dialogVisible=!1})},beforeClose:function(t){this.$refs.questForm&&this.$refs.questForm.resetFields(),t()},beforeClose2:function(t){this.activeNames=[],t()},handleDelete:function(t){var e=this;this.$confirm("确认要删除这个问题吗？").then(function(s){e.delete(t.id)}).catch(function(t){})},delete:function(t){var e=this;this.$http.post("api/quest/delete",{id:t}).then(function(t){e.$message({type:"success",message:"删除成功"}),e.getQuestion()})}},mounted:function(){var t=this;this.$nextTick(function(){t.getQuestion()})},activated:function(){var t=this;this.$nextTick(function(){t.getQuestion()})}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"lesson"},[s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){t.CommonObj.changePage(0)}}},[t._v("返回")]),t._v(" "),s("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"primary"},on:{click:t.showAdd}},[t._v("添加问题")]),t._v(" "),s("hr"),t._v(" "),s("h1",[t._v(t._s(t.CommonObj.lessonName)+"的题库")]),t._v(" "),s("div",{staticStyle:{width:"100%",overflow:"hidden"}},[s("el-table",{attrs:{data:t.questions}},[s("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),t._v(" "),s("el-table-column",{attrs:{prop:"title",label:"题目名字",width:"400"}}),t._v(" "),s("el-table-column",{attrs:{prop:"createTime",label:"创建时间",formatter:t.dateFormat}}),t._v(" "),s("el-table-column",{attrs:{label:"编辑",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){t.handleEdit(e.row)}}},[t._v("修改")]),t._v(" "),s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(s){t.handleDelete(e.row)}}},[t._v("删除")])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"提问",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(s){t.quest(e.row)}}},[t._v("提问")])]}}])})],1)],1),t._v(" "),s("el-pagination",{attrs:{"current-page":t.cur,"page-sizes":[10,50,100],background:"","page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"current-change":t.getQuestion,"size-change":t.handleSizeChange,"update:currentPage":function(e){t.cur=e}}}),t._v(" "),s("el-dialog",{attrs:{title:t.title,visible:t.dialogVisible,"before-close":t.beforeClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("el-form",{ref:"questForm",attrs:{model:t.questForm,rules:t.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"标题：",prop:"title"}},[s("el-input",{model:{value:t.questForm.title,callback:function(e){t.$set(t.questForm,"title",e)},expression:"questForm.title"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"内容：",prop:"question"}},[s("el-input",{attrs:{type:"textarea",rows:5},model:{value:t.questForm.question,callback:function(e){t.$set(t.questForm,"question",e)},expression:"questForm.question"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"答案：",prop:"answer"}},[s("el-input",{attrs:{type:"textarea",rows:5},model:{value:t.questForm.answer,callback:function(e){t.$set(t.questForm,"answer",e)},expression:"questForm.answer"}})],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm()}}},[t._v("确定")])],1)],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"提问",visible:t.dialogVisible2,"before-close":t.beforeClose2},on:{"update:visible":function(e){t.dialogVisible2=e}}},[s("div",{staticClass:"whiteSpace",domProps:{innerHTML:t._s(t.questForm.title)}}),t._v(" "),s("div",{staticClass:"whiteSpace content",domProps:{innerHTML:t._s(t.questForm.question)}}),t._v(" "),s("el-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[s("el-collapse-item",{attrs:{title:"答案",name:"1"}},[s("div",{staticClass:"whiteSpace",domProps:{innerHTML:t._s(t.questForm.answer)}})])],1)],1)],1)},staticRenderFns:[]};var p={data:function(){return{showStatus:0,commonSpace:{lessonId:"",lessonName:"",changePage:this.changePage.bind(this)}}},methods:{changePage:function(t){this.showStatus=t}},components:{lessonComp:u,listComp:s("Z0/y")(d,h,!1,function(t){s("ZPUu")},null,null).exports}},f={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[0==this.showStatus?e("lessonComp",{attrs:{CommonObj:this.commonSpace}}):this._e(),this._v(" "),1==this.showStatus?e("listComp",{attrs:{CommonObj:this.commonSpace}}):this._e()],1)},staticRenderFns:[]};var g=s("Z0/y")(p,f,!1,function(t){s("V1Az")},null,null);e.default=g.exports}});
//# sourceMappingURL=2.419cab725746a0a946ee.js.map