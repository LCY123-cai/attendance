webpackJsonp([5],{jHPF:function(e,s){},nXOw:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=t("lC5x"),i=t.n(a),r=t("J0Oq"),l=t.n(r),n=t("0xDb"),o=t.n(n),u={data:function(){return{cur:1,pageSize:10,total:0,dialogVisible:!1,dialogVisible2:!1,users:[],id:"",userPass:{pass:"",confirmPass:""},userDetail:{loginName:"",role:0},passRule:{pass:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:32,message:"长度在 6 到 32 个字符",trigger:"blur"}],confirmPass:[{required:!0,message:"请输入再次输入新密码",trigger:"blur"},{min:6,max:32,message:"长度在 6 到 32 个字符",trigger:"blur"},{validator:this.validatePass,trigger:"blur"}]}}},methods:{getUser:function(){var e=this;return l()(i.a.mark(function s(){var t;return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.$http.get("/api/user/list",{params:{page:e.cur,pageSize:e.pageSize}});case 2:t=s.sent,e.users=t.list,e.total=t.total;case 5:case"end":return s.stop()}},s,e)}))()},handleSizeChange:function(e){this.pageSize=e,this.getUser()},changePass:function(e){this.id=e.id,this.dialogVisible=!0},submitPass:function(){var e=this;this.$refs.userPass.validate(function(s){s&&e.$http.post("/api/user/updatePass",{id:e.id,password:e.userPass.confirmPass}).then(function(s){e.$message({type:"success",message:"更新成功"}),e.getUser(),e.dialogVisible=!1,e.userPass.pass="",e.userPass.confirmPass=""})})},submitRole:function(){var e=this;this.$refs.userDetail.validate(function(s){s&&e.$http.post("/api/user/updateRole",{id:e.id,role:e.userDetail.role}).then(function(s){e.$message({type:"success",message:"更新成功"}),e.getUser(),e.dialogVisible2=!1})})},roleFormat:function(e,s,t){return 0==t?"普通用户":"管理员"},dateFormat:function(e,s,t){return o.a.DateTransfer(new Date(t),"yyyy-MM-dd hh:mm:ss")},validatePass:function(e,s,t){this.userPass.pass!=this.userPass.confirmPass?t(new Error("两次输入密码不一致")):t()},toDetail:function(e){this.dialogVisible2=!0,this.id=e.id,this.userDetail.loginName=e.login_name,this.userDetail.role=e.role},beforeClose:function(e){this.userPass.pass="",this.userPass.confirmPass="",this.$refs.userPass&&this.$refs.userPass.resetFields(),e()},beforeClose2:function(e){this.activeNames=[],e()},handleDelete:function(e){var s=this;this.$confirm("确认要删除这个用户吗？").then(function(t){s.delete(e.id)}).catch(function(e){})},delete:function(e){var s=this;this.$http.post("api/user/delete",{id:e}).then(function(e){s.$message({type:"success",message:"删除成功"}),s.getUser()})}},mounted:function(){var e=this;this.$nextTick(function(){e.getUser()})},activated:function(){var e=this;this.$nextTick(function(){e.getUser()})}},c={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("div",{staticStyle:{width:"100%",overflow:"hidden"}},[t("el-table",{attrs:{data:e.users}},[t("el-table-column",{attrs:{prop:"id",label:"ID",width:"120"}}),e._v(" "),t("el-table-column",{attrs:{prop:"login_name",label:"用户名"}}),e._v(" "),t("el-table-column",{attrs:{prop:"role",label:"角色",formatter:e.roleFormat}}),e._v(" "),t("el-table-column",{attrs:{prop:"createTime",label:"创建时间",formatter:e.dateFormat}}),e._v(" "),t("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.toDetail(s.row)}}},[e._v("修改")]),e._v(" "),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){e.handleDelete(s.row)}}},[e._v("删除")])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"修改密码",width:"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(t){e.changePass(s.row)}}},[e._v("修改密码")])]}}])})],1)],1),e._v(" "),t("el-pagination",{attrs:{"current-page":e.cur,"page-sizes":[10,50,100],background:"","page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.getUser,"size-change":e.handleSizeChange,"update:currentPage":function(s){e.cur=s}}}),e._v(" "),t("el-dialog",{attrs:{title:"修改密码",visible:e.dialogVisible,"before-close":e.beforeClose},on:{"update:visible":function(s){e.dialogVisible=s}}},[t("el-form",{ref:"userPass",attrs:{model:e.userPass,"label-width":"100px",rules:e.passRule}},[t("el-form-item",{attrs:{label:"新密码",prop:"pass"}},[t("el-input",{attrs:{type:"password"},model:{value:e.userPass.pass,callback:function(s){e.$set(e.userPass,"pass",s)},expression:"userPass.pass"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"确定新密码",prop:"confirmPass"}},[t("el-input",{attrs:{type:"password"},model:{value:e.userPass.confirmPass,callback:function(s){e.$set(e.userPass,"confirmPass",s)},expression:"userPass.confirmPass"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(s){e.submitPass()}}},[e._v("确定")])],1)],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"编辑课程",visible:e.dialogVisible2},on:{"update:visible":function(s){e.dialogVisible2=s}}},[t("el-form",{ref:"userDetail",attrs:{model:e.userDetail,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"用户名",prop:"loginName"}},[t("el-input",{attrs:{disabled:""},model:{value:e.userDetail.loginName,callback:function(s){e.$set(e.userDetail,"loginName",s)},expression:"userDetail.loginName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"角色",prop:"role"}},[t("el-radio",{attrs:{label:0},model:{value:e.userDetail.role,callback:function(s){e.$set(e.userDetail,"role",s)},expression:"userDetail.role"}},[e._v("普通用户")]),e._v(" "),t("el-radio",{attrs:{label:1},model:{value:e.userDetail.role,callback:function(s){e.$set(e.userDetail,"role",s)},expression:"userDetail.role"}},[e._v("管理员")])],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(s){e.submitRole()}}},[e._v("确定")])],1)],1)],1)],1)},staticRenderFns:[]};var p=t("Z0/y")(u,c,!1,function(e){t("jHPF")},null,null);s.default=p.exports}});
//# sourceMappingURL=5.95fd2b149835de4b0066.js.map