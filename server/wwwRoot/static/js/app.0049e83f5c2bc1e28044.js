webpackJsonp([7],{"+SwN":function(e,t){},"0QNu":function(e,t){},ENLC:function(e,t){},HEWR:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("MVMM"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var n=s("Z0/y")({name:"App"},a,!1,function(e){s("b2Xx")},null,null).exports,o=s("zO6J"),i=s("4YfN"),l=s.n(i),c=s("9rMa"),u={data:function(){return{dialogVisible:!1,loginForm:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},regForm:{username:"",password:"",confirmPassword:""},regRule:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:32,message:"长度在 3 到 32 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:32,message:"长度在 6 到 32 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请输入再次输入新密码",trigger:"blur"},{min:6,max:32,message:"长度在 6 到 32 个字符",trigger:"blur"},{validator:this.validatePass,trigger:"blur"}]}}},methods:l()({login:function(){var e=this;this.$refs.loginForm.validate(function(t){t&&e.$http.post("api/user/login",{username:e.loginForm.username,password:e.loginForm.password}).then(function(t){e.$router.push("/welcome"),localStorage.username=e.loginForm.username,localStorage.role=t,e.clearTag()}).catch(function(t){e.loginForm.username="",e.loginForm.password=""})})},logout:function(){this.$http.get("api/user/logout").then(function(e){},function(e){})},beforeClose:function(e){this.regForm.username="",this.regForm.password="",this.regForm.confirmPassword="",this.$refs.regForm&&this.$refs.regForm.resetFields(),e()},validatePass:function(e,t,s){this.regForm.password!=this.regForm.confirmPassword?s(new Error("两次输入密码不一致")):s()},regUser:function(){var e=this;this.$refs.regForm.validate(function(t){t&&e.$http.get("api/user/reg",{params:{username:e.regForm.username,password:e.regForm.password}}).then(function(t){e.$message({type:"success",message:"注册成功"}),e.dialogVisible=!1})})}},Object(c.b)(["clearTag"])),mounted:function(){this.logout()}},m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-wrap"},[s("div",{staticClass:"login-div"},[e._m(0),e._v(" "),s("div",{staticClass:"right"},[s("el-form",{ref:"loginForm",attrs:{model:e.loginForm,"label-width":"60px",rules:e.rules}},[s("el-form-item",{attrs:{label:"用户名",prop:"username"}},[s("el-input",{attrs:{type:"text",placeholder:"请输入用户名"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{type:"password",placeholder:"请输入密码"},nativeOn:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.login(t):null}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v("登陆")]),e._v(" "),s("el-button",{attrs:{type:"warning"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("注册")])],1)],1)],1)]),e._v(" "),s("el-dialog",{attrs:{title:"注册",visible:e.dialogVisible,"before-close":e.beforeClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("el-form",{ref:"regForm",attrs:{model:e.regForm,"label-width":"100px",rules:e.regRule}},[s("el-form-item",{attrs:{label:"用户名",prop:"username"}},[s("el-input",{model:{value:e.regForm.username,callback:function(t){e.$set(e.regForm,"username",t)},expression:"regForm.username"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{type:"password"},model:{value:e.regForm.password,callback:function(t){e.$set(e.regForm,"password",t)},expression:"regForm.password"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"确定密码",prop:"confirmPassword"}},[s("el-input",{attrs:{type:"password"},model:{value:e.regForm.confirmPassword,callback:function(t){e.$set(e.regForm,"confirmPassword",t)},expression:"regForm.confirmPassword"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.regUser()}}},[e._v("确定")])],1)],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"left"},[t("h2",[this._v("自动考勤系统")]),this._v(" "),t("p",{staticClass:"blue-rectangle"})])}]};var p=s("Z0/y")(u,m,!1,function(e){s("HEWR"),s("0QNu")},"data-v-5dcb9852",null).exports,d={data:function(){return{dialogVisible:!1,passForm:{password:"",confirmPassword:""},rules:{password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:32,message:"长度在 6 到 32 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请输入再次输入新密码",trigger:"blur"},{min:6,max:32,message:"长度在 6 到 32 个字符",trigger:"blur"},{validator:this.validatePass,trigger:"blur"}]}}},computed:l()({},Object(c.c)(["isCollapse"]),{name:function(){return localStorage.username}}),methods:l()({},Object(c.b)(["triggerCollapse"]),{submitPass:function(){var e=this;this.$refs.passForm.validate(function(t){t&&e.$http.post("/api/user/minePass",{password:e.passForm.confirmPassword}).then(function(t){e.$message({type:"success",message:"更新成功"}),e.dialogVisible=!1,e.passForm.password="",e.passForm.confirmPassword=""})})},validatePass:function(e,t,s){this.passForm.password!=this.passForm.confirmPassword?s(new Error("两次输入密码不一致")):s()}})},f={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("header",[s("div",{staticClass:"left"},[s("span",[e._v(e._s(e.isCollapse?"考勤":"自动考勤系统"))]),e._v(" "),s("span",{staticClass:"fa fa-bars",on:{click:e.triggerCollapse}})]),e._v(" "),s("div",{staticClass:"right"},[e._v("\n      你好，"+e._s(e.name)+"  \n      "),s("span",{on:{click:function(t){e.dialogVisible=!0}}},[e._v("修改密码")]),e._v(" "),s("router-link",{attrs:{to:"/login"}},[e._v("退出登陆")])],1),e._v(" "),s("el-dialog",{attrs:{title:"修改密码",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("el-form",{ref:"passForm",attrs:{model:e.passForm,"label-width":"100px",rules:e.rules}},[s("el-form-item",{attrs:{label:"新密码",prop:"password"}},[s("el-input",{attrs:{type:"password"},model:{value:e.passForm.password,callback:function(t){e.$set(e.passForm,"password",t)},expression:"passForm.password"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"确定新密码",prop:"confirmPassword"}},[s("el-input",{attrs:{type:"password"},model:{value:e.passForm.confirmPassword,callback:function(t){e.$set(e.passForm,"confirmPassword",t)},expression:"passForm.confirmPassword"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitPass()}}},[e._v("确定")])],1)],1)],1)],1)},staticRenderFns:[]};var g=s("Z0/y")(d,f,!1,function(e){s("lyi7")},"data-v-73c38f15",null).exports,v={methods:l()({linkTo:function(e){this.$router.push(e),this.addTag({name:e,label:{"/attendance":"课堂考勤","/lesson":"我的课程","/student":"我的学生","/question":"我的题库","/user":"用户列表"}[e]})}},Object(c.b)(["addTag"])),computed:l()({},Object(c.c)(["isCollapse"]),{role:function(){return localStorage.role}})},h={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{class:e.isCollapse?"collapse":""},[s("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-openeds":[1,2],collapse:e.isCollapse,"background-color":"transparent","text-color":"#fff","active-text-color":"#fff"},on:{select:e.linkTo}},[s("el-menu-item",{attrs:{index:"/attendance"}},[s("i",{staticClass:"el-icon-edit"}),e._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[e._v("课堂考勤")])]),e._v(" "),s("el-submenu",{attrs:{index:"1"}},[s("template",{slot:"title"},[s("i",{staticClass:"el-icon-tickets"}),e._v(" "),s("span",[e._v("数据管理")])]),e._v(" "),s("el-menu-item",{attrs:{index:"/lesson"}},[s("span",{attrs:{slot:"title"},slot:"title"},[e._v("我的课程")])]),e._v(" "),s("el-menu-item",{attrs:{index:"/student"}},[s("span",{attrs:{slot:"title"},slot:"title"},[e._v("我的学生")])]),e._v(" "),s("el-menu-item",{attrs:{index:"/question"}},[s("span",{attrs:{slot:"title"},slot:"title"},[e._v("我的题库")])])],2),e._v(" "),1==e.role?s("el-submenu",{attrs:{index:"2"}},[s("template",{slot:"title"},[s("i",{staticClass:"fa fa-user"}),e._v(" "),s("span",[e._v("用户管理")])]),e._v(" "),s("el-menu-item",{attrs:{index:"/user"}},[s("span",{attrs:{slot:"title"},slot:"title"},[e._v("用户列表")])])],2):e._e()],1)],1)},staticRenderFns:[]};var b=s("Z0/y")(v,h,!1,function(e){s("V+C0"),s("QDNe")},"data-v-5674f5f8",null).exports,w={computed:l()({},Object(c.c)(["activedRouter","activeName"]),{activeKey:{set:function(e){this.setActive(e)},get:function(){return this.activeName}}}),methods:l()({handleClick:function(e){this.$router.push(e.name)},close:function(e){this.closeTag(e),0==this.activedRouter.length?this.$router.push("/welcome"):this.activeName==e&&(this.$router.push(this.activedRouter[0].name),this.setActive(this.activedRouter[0].name))}},Object(c.b)(["closeTag","setActive","addTag"]))},_={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-tabs",{attrs:{type:"card",closable:""},on:{"tab-click":e.handleClick,"tab-remove":e.close},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},e._l(e.activedRouter,function(e){return s("el-tab-pane",{key:e.name,attrs:{label:e.label,name:e.name}})}))},staticRenderFns:[]};var F={data:function(){return{isLogin:!1}},components:{topBar:g,sideBar:b,tags:s("Z0/y")(w,_,!1,function(e){s("btp1")},"data-v-39002c31",null).exports},computed:l()({},Object(c.c)(["isCollapse"])),beforeCreate:function(){var e=this;this.$http.get("api/user/isLogin").then(function(t){e.isLogin=!0})}},C={render:function(){var e=this.$createElement,t=this._self._c||e;return this.isLogin?t("div",{staticClass:"wrap"},[t("topBar"),this._v(" "),t("div",{staticClass:"main"},[t("sideBar"),this._v(" "),t("div",{staticClass:"content",class:this.isCollapse?"collapse":"normal"},[t("tags"),this._v(" "),t("div",{staticClass:"router"},[t("keep-alive",[t("router-view")],1)],1)],1)],1)],1):this._e()},staticRenderFns:[]};var $=s("Z0/y")(F,C,!1,function(e){s("aH5L")},"data-v-1bd7478e",null).exports,x={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"welcome"},[t("h2",[this._v("欢迎使用自动考勤系统")])])}]};var y=s("Z0/y")({beforeCreate:function(){this.$http.get("api/user/isLogin")}},x,!1,function(e){s("+SwN")},"data-v-118ba49a",null).exports;r.default.use(o.a);var P=new o.a({routes:[{path:"/",component:$,children:[{path:"attendance",component:function(e){return Promise.all([s.e(0),s.e(4)]).then(function(){return e(s("4mxk"))}.bind(null,s)).catch(s.oe)}},{path:"lesson",component:function(e){return Promise.all([s.e(0),s.e(3)]).then(function(){return e(s("I46q"))}.bind(null,s)).catch(s.oe)}},{path:"student",component:function(e){return Promise.all([s.e(0),s.e(1)]).then(function(){return e(s("GDFz"))}.bind(null,s)).catch(s.oe)}},{path:"question",component:function(e){return Promise.all([s.e(0),s.e(2)]).then(function(){return e(s("ePa7"))}.bind(null,s)).catch(s.oe)}},{path:"user",component:function(e){return Promise.all([s.e(0),s.e(5)]).then(function(){return e(s("nXOw"))}.bind(null,s)).catch(s.oe)}},{path:"welcome",component:y}]},{path:"/login",component:p}]});s("ENLC");r.default.use(c.a);var k=new c.a.Store({state:{isCollapse:!1,activedRouter:[],activeName:""},mutations:{triggerCollapse:function(e){e.isCollapse=!e.isCollapse},addTag:function(e,t){0==e.activedRouter.filter(function(e){return e.name==t.name}).length&&e.activedRouter.push(t),e.activeName=t.name},closeTag:function(e,t){e.activedRouter=e.activedRouter.filter(function(e){return e.name!==t})},setActive:function(e,t){e.activeName=t},clearTag:function(e){e.activedRouter=[]}}}),R=s("wi/X"),N=s.n(R),E=s("2sCs"),T=s.n(E);function V(e){this.$message({type:"error",message:e.length<25?e:e.substring(0,25)+"..."}),console.error(e)}r.default.use(N.a),T.a.interceptors.response.use(function(e){var t=e.data;if(1==t.code)return t.msg;if(-1!=t.code)throw V.call(O,t.msg),t.msg;alert("登陆过期，请重新登陆"),O.$router.push("/login")},function(e){V.call(O,data.msg)}),r.default.prototype.$http=T.a,r.default.config.productionTip=!1;var O=new r.default({el:"#app",router:P,components:{App:n},template:"<App/>",store:k})},QDNe:function(e,t){},"V+C0":function(e,t){},aH5L:function(e,t){},b2Xx:function(e,t){},btp1:function(e,t){},lyi7:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.0049e83f5c2bc1e28044.js.map